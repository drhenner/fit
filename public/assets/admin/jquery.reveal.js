/*
 * jQuery Reveal Plugin 1.1
 * www.ZURB.com
 * Copyright 2010, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
/*globals jQuery */
(function(e){"use strict";var t=!1;e(document).on("click","a[data-reveal-id]",function(t){t.preventDefault();var n=e(this).attr("data-reveal-id");e("#"+n).reveal(e(this).data())}),e.fn.reveal=function(n){var r={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop};return n=e.extend({},r,n),this.each(function(){function f(){o=!1}function l(){o=!0}function c(n){var r=e(".reveal-modal.open");r.length===1&&(t=!0,e(".reveal-modal.open").trigger("reveal:close"))}function h(){o||(l(),c(r),r.addClass("open"),n.animation==="fadeAndPop"&&(r.css({top:e(document).scrollTop()-s,opacity:0,visibility:"visible",display:"block"}),u.fadeIn(n.animationSpeed/2),r.delay(n.animationSpeed/2).animate({top:e(document).scrollTop()+i+"px",opacity:1},n.animationSpeed,function(){r.trigger("reveal:opened")})),n.animation==="fade"&&(r.css({opacity:0,visibility:"visible",display:"block",top:e(document).scrollTop()+i}),u.fadeIn(n.animationSpeed/2),r.delay(n.animationSpeed/2).animate({opacity:1},n.animationSpeed,function(){r.trigger("reveal:opened")})),n.animation==="none"&&(r.css({visibility:"visible",display:"block",top:e(document).scrollTop()+i}),u.css({display:"block"}),r.trigger("reveal:opened")))}function p(){o||(l(),r.removeClass("open"),n.animation==="fadeAndPop"&&(r.animate({top:e(document).scrollTop()-s+"px",opacity:0},n.animationSpeed/2,function(){r.css({top:i,opacity:1,visibility:"hidden",display:"none"})}),t?r.trigger("reveal:closed"):u.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){r.trigger("reveal:closed")}),t=!1),n.animation==="fade"&&(r.animate({opacity:0},n.animationSpeed,function(){r.css({opacity:1,visibility:"hidden",display:"none",top:i})}),t?r.trigger("reveal:closed"):u.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){r.trigger("reveal:closed")})),n.animation==="none"&&(r.css({visibility:"hidden",display:"block",top:i}),t||u.css({display:"none"}),r.trigger("reveal:closed")))}function d(){r.unbind(".reveal"),u.unbind(".reveal"),e("."+n.dismissModalClass).unbind(".reveal"),e("body").unbind(".reveal")}var r=e(this),i=parseInt(r.css("top"),10),s=r.height()+i,o=!1,u=e(".reveal-modal-bg"),a;u.length===0&&(u=e('<div class="reveal-modal-bg" />').insertAfter(r),u.fadeTo("fast",.8)),r.bind("reveal:open.reveal",h),r.bind("reveal:close.reveal",p),r.bind("reveal:opened.reveal reveal:closed.reveal",f),r.bind("reveal:closed.reveal",d),r.bind("reveal:open.reveal",n.open),r.bind("reveal:opened.reveal",n.opened),r.bind("reveal:close.reveal",n.close),r.bind("reveal:closed.reveal",n.closed),r.trigger("reveal:open"),a=e("."+n.dismissModalClass).bind("click.reveal",function(){r.trigger("reveal:close")}),n.closeOnBackgroundClick&&(u.css({cursor:"pointer"}),u.bind("click.reveal",function(){r.trigger("reveal:close")})),e("body").bind("keyup.reveal",function(e){e.which===27&&r.trigger("reveal:close")})})}})(jQuery);