var UfcFit=window.UfcFit||{};typeof UfcFit.Shopping=="undefined"&&(UfcFit.Shopping={});var debug_variable=null;typeof UfcFit.Shopping.cart=="undefined"&&(UfcFit.Shopping.cart={initialize:function(){Stripe.setPublishableKey($('meta[name="stripe-key"]').attr("content")),$("#new_payment").submit(function(e){return $(".cart-submit-button").attr("disabled","disabled"),UfcFit.Shopping.cart.submitForm(),!1})},submitForm:function(){UfcFit.Validators.CreditCards.validateNumber(UfcFit.Validators.CreditCards.creditCardInput),UfcFit.Validators.CreditCards.valid?($(".payment-errors").fadeOut(),Stripe.createToken({name:$("#full_name").val(),number:$("#number").val(),cvc:$("#verification_value").val(),exp_month:$("#month").val(),exp_year:$("#year").val()},UfcFit.Shopping.cart.stripeResponseHandler)):($(".cart-submit-button").attr("disabled",!1),$(".payment-errors").html("Credit Card is not valid."),$(".payment-errors").fadeIn())},stripeResponseHandler:function(e,t){if(e!=200||t.error)$(".cart-submit-button").attr("disabled",!1),$(".payment-errors").html(t.error.message),$(".payment-errors").fadeIn();else{var n=$("#new_payment"),r=t.id;$("#stripe_card_token").val(r),$("#token_amount").val(t.amount),n.get(0).submit()}},lastFour:function(){var e=$("#number").val();return e.replace(/\D/g,"").substring(e.length-4,e.length)}},jQuery(function(){UfcFit.Shopping.cart.initialize()}));